import{t as A,s as x,a as g}from"../chunks/dHEmfqFJ.js";import{a5 as N,j as O,m as S,v as d,z as u,y,a6 as P,A as Z,w as j,x as q}from"../chunks/x_38f7-J.js";import{r as C,a as R,e as U,s as B}from"../chunks/DIVQfsGm.js";import{i as J,a as G,b as I,c as K}from"../chunks/B37FSsIl.js";import{g as T}from"../chunks/JL5XOsWV.js";function D(e,a,t){N(()=>{var n=O(()=>a(e,t==null?void 0:t())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function Q(e){const a=JSON.parse(e);return a.data&&(a.data=I(a.data,K.decoders)),a}function _(e){return HTMLElement.prototype.cloneNode.call(e)}function h(e,a=()=>{}){const t=async({action:r,result:o,reset:l=!0,invalidateAll:s=!0})=>{o.type==="success"&&(l&&HTMLFormElement.prototype.reset.call(e),s&&await J()),(location.origin+location.pathname===r.origin+r.pathname||o.type==="redirect"||o.type==="error")&&await G(o)};async function n(r){var k,E,L,M,z;if(((k=r.submitter)!=null&&k.hasAttribute("formmethod")?r.submitter.formMethod:_(e).method)!=="post")return;r.preventDefault();const l=new URL((E=r.submitter)!=null&&E.hasAttribute("formaction")?r.submitter.formAction:_(e).action),s=(L=r.submitter)!=null&&L.hasAttribute("formenctype")?r.submitter.formEnctype:_(e).enctype,m=new FormData(e),b=(M=r.submitter)==null?void 0:M.getAttribute("name");b&&m.append(b,((z=r.submitter)==null?void 0:z.getAttribute("value"))??"");const v=new AbortController;let c=!1;const f=await a({action:l,cancel:()=>c=!0,controller:v,formData:m,formElement:e,submitter:r.submitter})??t;if(c)return;let p;try{const i=new Headers({accept:"application/json","x-sveltekit-action":"true"});s!=="multipart/form-data"&&i.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(s)?s:"application/x-www-form-urlencoded");const F=s==="multipart/form-data"?m:new URLSearchParams(m),H=await fetch(l,{method:"POST",headers:i,cache:"no-store",body:F,signal:v.signal});p=Q(await H.text()),p.type==="error"&&(p.status=H.status)}catch(i){if((i==null?void 0:i.name)==="AbortError")return;p={type:"error",error:i}}await f({action:l,formData:m,formElement:e,update:i=>t({action:l,result:p,reset:i==null?void 0:i.reset,invalidateAll:i==null?void 0:i.invalidateAll}),result:p})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",n)}}}var V=A('<div class="flex flex-row w-full items-center justify-between content-center min-w-56 mb-2 hover:bg-gray-200 py-2 px-3 rounded"><span> </span> <form method="POST" action="?/delete"><input type="hidden" name="id"> <button aria-label="Mark as complete"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="cursor-pointer fill-gray-500 hover:fill-red-800 p-2 h-10 w-10"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"></path></svg></button></form></div>');function W(e,a){S(a,!0);var t=V(),n=d(t),r=d(n,!0);u(n);var o=y(n,2),l=d(o);C(l),P(2),u(o),D(o,s=>h==null?void 0:h(s)),u(t),Z(()=>{x(r,a.todo.title),R(l,a.todo.id)}),g(e,t),j()}const X=()=>"Task management",Y=()=>"Task management",$=()=>"任务管理",tt=(e={},a={})=>{const t=a.locale??T();return t==="en"?X():t==="fr"?Y():t==="zh"?$():"title"},et=()=>"Add a task:",at=()=>"Ajouter une tâche:",rt=()=>"添加任务：",nt=(e={},a={})=>{const t=a.locale??T();return t==="en"?et():t==="fr"?at():t==="zh"?rt():"add_input.label"},ot=()=>"New task...",it=()=>"Nouvelle tâche...",lt=()=>"新任务...",st=(e={},a={})=>{const t=a.locale??T();return t==="en"?ot():t==="fr"?it():t==="zh"?lt():"add_input.placeholder"};var ct=A("<li><!></li>"),ut=A('<div class="flex flex-col mt-24 items-center content-center w-fit mx-auto h-screen gap-5"><h1 class="font-bold text-2xl mb-6"> </h1> <form method="POST" action="?/create" class="flex flex-row items-center content-center"><label class="flex flex-row gap-1"><span class="font-semibold w-36 my-auto"> </span> <input name="title" autocomplete="off" class="h-10 py-2 px-3 rounded-lg"></label></form> <ul class="w-full"></ul></div>');function vt(e,a){S(a,!0);var t=ut(),n=d(t),r=d(n,!0);u(n);var o=y(n,2),l=d(o),s=d(l),m=d(s,!0);u(s);var b=y(s,2);u(l),u(o),D(o,c=>h==null?void 0:h(c));var v=y(o,2);U(v,21,()=>a.data.todos,c=>c.id,(c,w)=>{var f=ct(),p=d(f);W(p,{get todo(){return q(w)}}),u(f),g(c,f)}),u(v),u(t),Z((c,w,f)=>{x(r,c),x(m,w),B(b,"placeholder",f)},[()=>tt(),()=>nt(),()=>st()]),g(e,t),j()}export{vt as component};
